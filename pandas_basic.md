# Pandas

csv 파일을 읽고 쓸 수 있음.
시리즈와 데이터프레임을 만들 수 있음.

## 기본적인 개념

### Series

> 기본적인 생성법

```python
s = pd.Series([100, 200, 300])	# values
s = pd.Series([100, 200, 300], index=['서울', '대구', '부산'], dtype=np.int32)	# value, index
s2 = pd.Series({'서울':300, '대구':200, '대전':100})	# dictionary (잘 쓰이진 않음)
```

> 불러오기

```python
# 전체 불러오기
s.values	# values 값을 array로 불러옴
s.index		# index 를 불러옴
-------------------------------------------------------------------
# value 불러오기
s[0]		# 인덱스 0의 value 추출
s['서울']	   # '서울' 의 value 추출
s.서울	   # 버전에 따라 다르지만 한글 명령어로도 추출 가능
-------------------------------------------------------------------
# Series 추출하기
s[[0]]				   # 0 인덱스에 해당하는 Series 추출
s[[0, 2]]			   # 0, 2 인덱스에 해당하는 Series 추출
s[['서울', '부산']]		# '서울', '부산' 에 해당하는 Series 추출
s[1:3]			   	   # 0에서 3 - 1 까지의 Series 슬라이싱
s['부산':'대구']	    # '부산' 에서 '대구' 까지의 Series 슬라이싱
------------------------------------------------------------------
# Series 필터링
s[(100 < s) & (s < 300)]	# 값 100 에서 300 사이 시리즈 필터링
s[(s < 100) | (s > 200)]	# 값 100 미만 그리고 200초과 시리즈 필터링
```

> 이름 설정

```python
s.name = '인구'			# index 이름 설정
s.index.name = '도시'		# series 이름 설정
```

> 연산

```python
s / 10	# value 값 전체에 10으로 나눔
```

> 인덱스 기반 연산 가능

```python
rs = s - s2				# 인덱스가 매칭 안되는 값은 NaN
rs = (s-s2)/s * 100		# 사칙연산 다양하게 적용 가능
s.value - s2.values		# 값 결과값을 활용한 연산
```

> null 판별

```python
rs.notnull()			# null 인지 아닌지 False, True 로 Series 추출
rs[rs.notnull()]		# null 이 아닌(True) value 에 해당하는 Series 추출
```

> 데이터 갱신

```python
rs['청주'] = 400 		# '청주' 문자 인덱스에 값 400 추가
del re['서울']		# '서울' 문자 인덱스 행 제거
```

### DataFrame

> 예시 데이터

```python
data = {
    "지역": ["수도권", "경상권", "경상권"],
    "2015": [100, 200, 300],
    "2010": [400, 500, 600],
    "2005": [700, 800, 900],
    "2000": [1000, 1100, 1200],
    "2010-2015 증가율": [0.01, 0.02, 0.03]
}
columns = ["지역", "2000", "2005", "2010", "2015", "2010-2015 증가율"]
index = ["서울", "부산", "대구"]
```

> 기본적인 생성법

```python
df = pd.DataFrame(data, index=index, columns=columns)
```

> 불러오기

```python
df['지역']			# '지역' 열에 속하는 Series 불러오기
df.지역				# .한글 로도 가능
df.values		     # 모든 values 를 array 로 추출
df['지역'].values		# '지역' 열에 속하는 values 추출
df.지역.values		# .한글 로도 가능
df.columns		 		# 열 이름 index 추출
df.columns.values		# 열 이름 index를 array로 추출
df[['지역']]			# '지역' 열로 이루어진 DataFrame 추출
df[['지역', '2015']]	# '지역', '2015' 열로 이루어진 DataFrame 추출
df['서울':'부산']	# '서울' 부터 '부산' 인덱스 행으로 이루어진 DataFrame 추출
df[1:3]		 # 1번 인덱스부터 3-1 번 인덱스 행으로 이루어진 DataFrame 추출 
df.head(2)	# 앞에서부터 2번째 행까지의 DataFrame 추출 (수치 미입력시 기본 5개)
df.tail(2)	# 뒤에서부터 2번째 행까지의 DataFrame 추출 (수치 미입력시 기본 5개)
df['2015']['서울']		# '2015' 열에서 '서울' 행의 value 추출. df['서울']['2015'] 불가능
```

> 이름 추가

```python
df.index.name = '도시'	# index 이름 추가
df.columns.name = '특성'	# columns 이름 추가
```

> 전치

```
df.T	# 전치
```

> 데이터 조작

```python
df['2010-2015 증가율'] = df['2010-2015 증가율'] * 100	# '2010-2015 증가율' 열의 values 갱신
df['2020'] = [1, 2, 3]			# '2020' 이름을 가진 열을 끝에 추가
df['2015']['서울'] = 200		   # '2015' 열의 '서울' 행 value 를 200으로 변경
del df['2020']					# '2020' 이름을 가진 열 삭제
```





















